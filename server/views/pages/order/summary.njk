{% extends "../../partials/layout.njk" %}

{% set pageTitle = applicationName + " - Form Details" %}
{% set mainClasses = "app-container govuk-body" %}
{% from "moj/components/page-header-actions/macro.njk" import mojPageHeaderActions %}
{%- from "moj/components/search/macro.njk" import mojSearch -%}
{%- from "moj/components/pagination/macro.njk" import mojPagination -%}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block content %}

{{ govukBackLink({
  text: "Back",
  href: "/"
}) }}

<div class="homepage-content">
  {{ mojPageHeaderActions({
  heading: {
    text: "Apply for electronic monitoring"
  }
}) }}

</div>
  <p class="govuk-body-l">
    Complete all sections before submitting the form.
  </p>

  <ul class="govuk-task-list">
    <li class="govuk-task-list__item govuk-task-list__item--with-link">
      <div class="govuk-task-list__name-and-hint">
        {% if order.status == "Submitted" %}
            <a class="govuk-link govuk-task-list__link" href="/order/{{ order.id }}/device-wearer" aria-describedby="order-section-device-wearer">
                About the device wearer
            </a>
        {% else %}
            <a class="govuk-link govuk-task-list__link" href="/order/{{ order.id }}/device-wearer/edit" aria-describedby="order-section-device-wearer">
                About the device wearer
            </a>
        {% endif %}
      </div>
      {% if order.deviceWearer.isComplete %}
        <div class="govuk-task-list__status" >
          <strong class="govuk-tag govuk-tag--green">
            Complete
          </strong>
        </div>
      {% else %}               
        <div class="govuk-task-list__status" >
           <strong class="govuk-tag govuk-tag--grey">
            Incomplete
          </strong>
        </div>
      {% endif %}
    </li>
    <li class="govuk-task-list__item govuk-task-list__item--with-link">
      <div class="govuk-task-list__name-and-hint">
        {% if order.status == "Submitted" %}
            <a class="govuk-link govuk-task-list__link" href="/order/{{ order.id }}/contact-details" aria-describedby="order-section-contact-details">
                Contact details
            </a>
        {% else %}
            <a class="govuk-link govuk-task-list__link" href="/order/{{ order.id }}/contact-details/edit" aria-describedby="order-section-contact-details">
                Contact details
            </a>
        {% endif %}
      </div>
      {% if order.contactDetails.isComplete %}
        <div class="govuk-task-list__status" >
          <strong class="govuk-tag govuk-tag--green">
            Complete
          </strong>
        </div>
      {% else %}               
        <div class="govuk-task-list__status" >
           <strong class="govuk-tag govuk-tag--grey">
            Incomplete
          </strong>
        </div>
      {% endif %}
    </li>
  </ul>

  <div class="govuk-button-group">
    {% if order.status == "Draft" %}

        {{ govukButton({
            text: "Submit order"
        }) }}
  
        {{ govukButton({
            text: "Delete order",
            classes: "govuk-button--warning",
            href: "/order/" + order.id + "/delete"
        }) }}
    {% else %}

        <a class="govuk-link" href="/">Return to order search view</a>

    {% endif %}
  </div>

{% endblock %}
